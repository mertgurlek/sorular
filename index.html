<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#6c5ce7">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="YDS Quiz">
    <meta name="description" content="YDS sÄ±navÄ±na hazÄ±rlÄ±k iÃ§in interaktif soru Ã§alÄ±ÅŸma uygulamasÄ±">
    <title>YDS Soru Ã‡alÄ±ÅŸma</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="icon" type="image/png" href="icons/icon-192.png">
</head>
<body class="dark-mode">
    <!-- Auth Screen -->
    <div id="authScreen" class="auth-screen">
        <div class="auth-container">
            <div class="auth-header">
                <h1>ğŸ¯ YDS Soru Ã‡alÄ±ÅŸma</h1>
                <p>HesabÄ±nÄ±za giriÅŸ yapÄ±n veya yeni hesap oluÅŸturun</p>
            </div>
            
            <!-- Login Form -->
            <form id="loginForm" class="auth-form" onsubmit="return false;">
                <h2>GiriÅŸ Yap</h2>
                <div class="form-group">
                    <label for="loginUsername">KullanÄ±cÄ± AdÄ± veya Email</label>
                    <input type="text" id="loginUsername" placeholder="kullaniciadi veya email@example.com" autocomplete="username">
                </div>
                <div class="form-group">
                    <label for="loginPassword">Åifre</label>
                    <input type="password" id="loginPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password">
                </div>
                <div id="loginError" class="auth-error"></div>
                <button id="loginBtn" class="btn btn-primary btn-large btn-full" type="button">GiriÅŸ Yap</button>
                <p class="auth-switch">
                    HesabÄ±nÄ±z yok mu? <a href="#" id="showRegister">KayÄ±t Ol</a>
                </p>
            </form>
            
            <!-- Register Form -->
            <form id="registerForm" class="auth-form hidden" onsubmit="return false;">
                <h2>KayÄ±t Ol</h2>
                <div class="form-group">
                    <label for="registerUsername">KullanÄ±cÄ± AdÄ±</label>
                    <input type="text" id="registerUsername" placeholder="kullaniciadi" autocomplete="username">
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" placeholder="email@example.com" autocomplete="email">
                </div>
                <div class="form-group">
                    <label for="registerPassword">Åifre (min 6 karakter)</label>
                    <input type="password" id="registerPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="new-password">
                </div>
                <div id="registerError" class="auth-error"></div>
                <button id="registerBtn" class="btn btn-primary btn-large btn-full" type="button">KayÄ±t Ol</button>
                <p class="auth-switch">
                    Zaten hesabÄ±nÄ±z var mÄ±? <a href="#" id="showLogin">GiriÅŸ Yap</a>
                </p>
            </form>
            
            <!-- Guest Mode -->
            <div class="auth-divider">
                <span>veya</span>
            </div>
            <button id="guestBtn" class="btn btn-secondary btn-large btn-full">ğŸ‘¤ Misafir Olarak Devam Et</button>
        </div>
    </div>

    <div class="app-wrapper hidden" id="mainApp">
        <!-- GPT Chat Panel (SaÄŸ taraf) -->
        <div id="gptChatPanel" class="gpt-chat-panel">
            <div class="gpt-panel-header">
                <div class="gpt-panel-title">
                    <span class="gpt-icon">ğŸ¤–</span>
                    <span>GPT Asistan</span>
                </div>
                <button id="closeGptPanel" class="gpt-panel-close" title="Paneli Kapat">Ã—</button>
            </div>
            <div class="gpt-panel-body">
                <div id="gptChatMessages" class="gpt-chat-messages">
                    <div class="gpt-welcome-message">
                        <div class="gpt-welcome-icon">ğŸ“</div>
                        <h3>YDS AsistanÄ±nÄ±z</h3>
                        <p>Sorularla ilgili aÃ§Ä±klama almak iÃ§in aÅŸaÄŸÄ±daki butona tÄ±klayÄ±n veya quiz sÄ±rasÄ±nda "GPT'ye Sor" butonunu kullanÄ±n.</p>
                    </div>
                </div>
            </div>
            <div class="gpt-panel-footer">
                <button id="askGptCurrentBtn" class="btn btn-primary btn-full gpt-ask-current-btn" disabled>
                    <span class="btn-icon">ğŸ’¡</span>
                    <span>Bu Soruyu AÃ§Ä±kla</span>
                </button>
                <div class="gpt-panel-hint">
                    <span>ğŸ’¡</span> YanlÄ±ÅŸ cevapladÄ±ÄŸÄ±nÄ±z sorular iÃ§in otomatik aÃ§Ä±klama alabilirsiniz
                </div>
            </div>
        </div>

        <!-- GPT Panel Toggle Button (KapalÄ±yken gÃ¶rÃ¼nÃ¼r) -->
        <button id="gptPanelToggle" class="gpt-panel-toggle" title="GPT Asistan">
            <span class="toggle-icon">ğŸ¤–</span>
            <span class="toggle-badge" id="gptBadge"></span>
        </button>

        <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>ğŸ¯ YDS Soru Ã‡alÄ±ÅŸma</h1>
            <div class="header-actions">
                <div id="userInfo" class="user-info">
                    <span id="userDisplayName">Misafir</span>
                    <button id="logoutBtn" class="btn btn-small btn-secondary">Ã‡Ä±kÄ±ÅŸ</button>
                </div>
                <button id="themeToggle" class="btn btn-icon" title="Tema DeÄŸiÅŸtir">
                    <span class="icon-sun">â˜€ï¸</span>
                    <span class="icon-moon">ğŸŒ™</span>
                </button>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="tabs">
            <button class="tab active" data-tab="quiz">ğŸ“ Quiz</button>
            <button class="tab" data-tab="exam">ğŸ“‹ SÄ±nav</button>
            <button class="tab" data-tab="flashcards">ğŸƒ Flashcard</button>
            <button class="tab" data-tab="favorites">â­ Favoriler</button>
            <button class="tab" data-tab="wrong-answers">âŒ YanlÄ±ÅŸlarÄ±m</button>
            <button class="tab" data-tab="unknown-words">ğŸ“š BilmediÄŸim Kelimeler</button>
            <button class="tab" data-tab="challenge">âš”ï¸ YarÄ±ÅŸma</button>
            <button class="tab" data-tab="key-words">ğŸ”‘ Kritik Kelimeler</button>
            <button class="tab" data-tab="stats">ğŸ“Š Ä°statistikler</button>
        </nav>

        <!-- Quiz Tab -->
        <section id="quiz-tab" class="tab-content active">
            <!-- Category Selection -->
            <div id="category-selection" class="card">
                <h2>Kategori SeÃ§</h2>
                <div id="category-grid" class="category-grid">
                    <!-- Categories will be loaded here -->
                </div>
                <div class="quiz-options">
                    <label>
                        <span>Soru SayÄ±sÄ±:</span>
                        <select id="questionCount">
                            <option value="10">10</option>
                            <option value="20">20</option>
                            <option value="30">30</option>
                            <option value="50">50</option>
                            <option value="all">TÃ¼mÃ¼</option>
                        </select>
                    </label>
                    <label>
                        <span>SÃ¼re Limiti:</span>
                        <select id="timerMode">
                            <option value="0">SÃ¼resiz</option>
                            <option value="30">30 saniye</option>
                            <option value="45">45 saniye</option>
                            <option value="60">60 saniye</option>
                            <option value="90">90 saniye</option>
                            <option value="120">2 dakika</option>
                        </select>
                    </label>
                    <label>
                        <input type="checkbox" id="shuffleQuestions" checked>
                        <span>SorularÄ± KarÄ±ÅŸtÄ±r</span>
                    </label>
                    <label>
                        <span>Soru Filtresi:</span>
                        <select id="historyFilter">
                            <option value="all">TÃ¼m Sorular</option>
                            <option value="unsolved">Sadece Ã‡Ã¶zÃ¼lmemiÅŸler</option>
                            <option value="wrong">Sadece YanlÄ±ÅŸlarÄ±m</option>
                            <option value="exclude_correct">DoÄŸrular HariÃ§</option>
                        </select>
                    </label>
                </div>
                <button id="startQuiz" class="btn btn-primary btn-large" disabled>BaÅŸla</button>
            </div>

            <!-- Quiz Area -->
            <div id="quiz-area" class="card hidden">
                <div class="quiz-header">
                    <div class="quiz-progress">
                        <span id="currentQuestion">1</span> / <span id="totalQuestions">10</span>
                    </div>
                    <div id="timerDisplay" class="timer-display hidden">
                        <span class="timer-icon">â±ï¸</span>
                        <span id="timerValue">60</span>s
                    </div>
                    <div class="quiz-score">
                        <span class="correct">âœ“ <span id="correctCount">0</span></span>
                        <span class="wrong">âœ— <span id="wrongCount">0</span></span>
                    </div>
                    <button id="exitQuiz" class="btn btn-secondary btn-small">Ã‡Ä±k</button>
                </div>

                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill"></div>
                </div>

                <div id="questionContainer" class="question-container">
                    <div id="historyIndicator" class="history-indicator hidden"></div>
                    <div class="question-header">
                        <p id="questionText" class="question-text"></p>
                        <button id="favoriteBtn" class="btn btn-icon favorite-btn" title="Favorilere Ekle">
                            <span class="fav-icon">â˜†</span>
                        </button>
                    </div>
                    <!-- Ä°pucu Butonu ve AlanÄ± -->
                    <div id="hintArea" class="hint-area hidden">
                        <button id="hintBtn" class="btn btn-hint" title="Ä°pucu GÃ¶ster">
                            <span>ğŸ’¡ Ä°pucu</span>
                        </button>
                        <div id="hintContent" class="hint-content hidden"></div>
                    </div>
                    <div id="optionsContainer" class="options-container"></div>
                </div>

                <div id="feedback" class="feedback hidden">
                    <p id="feedbackText"></p>
                </div>

                <div class="quiz-actions">
                    <button id="prevQuestion" class="btn btn-secondary hidden">â† Ã–nceki Soru</button>
                    <button id="nextQuestion" class="btn btn-primary hidden">Sonraki Soru â†’</button>
                </div>
            </div>

            <!-- Quiz Results -->
            <div id="quiz-results" class="card hidden">
                <h2>Quiz TamamlandÄ±! ğŸ‰</h2>
                <div class="results-summary">
                    <div class="result-stat">
                        <span class="result-number" id="finalCorrect">0</span>
                        <span class="result-label">DoÄŸru</span>
                    </div>
                    <div class="result-stat">
                        <span class="result-number" id="finalWrong">0</span>
                        <span class="result-label">YanlÄ±ÅŸ</span>
                    </div>
                    <div class="result-stat">
                        <span class="result-number" id="finalPercentage">0%</span>
                        <span class="result-label">BaÅŸarÄ±</span>
                    </div>
                </div>
                <button id="restartQuiz" class="btn btn-primary btn-large">Yeni Quiz BaÅŸlat</button>
            </div>
        </section>

        <!-- Exam Tab -->
        <section id="exam-tab" class="tab-content">
            <!-- Exam Setup -->
            <div id="exam-setup" class="card">
                <h2>ğŸ“‹ YDS SÄ±nav SimÃ¼lasyonu</h2>
                <p class="exam-description">GerÃ§ek YDS sÄ±navÄ± formatÄ±nda deneme sÄ±navÄ±. SÄ±nav boyutunu seÃ§in:</p>
                
                <div class="exam-size-selector">
                    <label class="exam-size-option">
                        <input type="radio" name="examSize" value="mini" id="examSizeMini">
                        <div class="exam-size-card">
                            <span class="exam-size-icon">âš¡</span>
                            <span class="exam-size-title">Mini Quiz</span>
                            <span class="exam-size-count">20 Soru</span>
                            <span class="exam-size-time">35 dakika</span>
                        </div>
                    </label>
                    <label class="exam-size-option">
                        <input type="radio" name="examSize" value="medium" id="examSizeMedium">
                        <div class="exam-size-card">
                            <span class="exam-size-icon">ğŸ“</span>
                            <span class="exam-size-title">Orta Quiz</span>
                            <span class="exam-size-count">40 Soru</span>
                            <span class="exam-size-time">75 dakika</span>
                        </div>
                    </label>
                    <label class="exam-size-option">
                        <input type="radio" name="examSize" value="full" id="examSizeFull" checked>
                        <div class="exam-size-card">
                            <span class="exam-size-icon">ğŸ¯</span>
                            <span class="exam-size-title">Tam YDS</span>
                            <span class="exam-size-count">80 Soru</span>
                            <span class="exam-size-time">150 dakika</span>
                        </div>
                    </label>
                </div>

                <div class="exam-distribution-info">
                    <h4>ğŸ“Š YDS Soru DaÄŸÄ±lÄ±mÄ±</h4>
                    <div id="examDistributionPreview" class="distribution-preview">
                        <!-- Will be populated by JS -->
                    </div>
                </div>
                
                <button id="startExam" class="btn btn-primary btn-large">ğŸš€ SÄ±nava BaÅŸla</button>
            </div>

            <!-- Exam Area -->
            <div id="exam-area" class="card hidden">
                <div class="exam-header">
                    <div class="exam-timer">
                        <span class="timer-icon">â±ï¸</span>
                        <span id="examTimerValue">150:00</span>
                    </div>
                    <div class="exam-progress-info">
                        Soru <span id="examCurrentQ">1</span> / <span id="examTotalQ">80</span>
                    </div>
                    <button id="submitExam" class="btn btn-danger btn-small">SÄ±navÄ± Bitir</button>
                </div>

                <div class="exam-question-nav">
                    <div id="examQuestionNav" class="question-nav-grid">
                        <!-- Question navigation buttons will be generated here -->
                    </div>
                </div>

                <div id="examQuestionContainer" class="question-container">
                    <p id="examQuestionText" class="question-text"></p>
                    <div id="examOptionsContainer" class="options-container"></div>
                </div>

                <div class="exam-nav-buttons">
                    <button id="examPrevQ" class="btn btn-secondary">â† Ã–nceki</button>
                    <button id="examNextQ" class="btn btn-primary">Sonraki â†’</button>
                </div>
            </div>

            <!-- Exam Results -->
            <div id="exam-results" class="card hidden">
                <h2>ğŸ“Š SÄ±nav SonuÃ§larÄ±</h2>
                <div class="exam-results-summary">
                    <div class="exam-result-big">
                        <span class="exam-score" id="examScore">0</span>
                        <span class="exam-score-label">/ 80</span>
                    </div>
                    <div class="exam-result-percentage">
                        <span id="examPercentage">0%</span>
                        <span class="label">BaÅŸarÄ± OranÄ±</span>
                    </div>
                </div>
                
                <div class="exam-stats-grid">
                    <div class="exam-stat">
                        <span class="value correct" id="examCorrectCount">0</span>
                        <span class="label">DoÄŸru</span>
                    </div>
                    <div class="exam-stat">
                        <span class="value wrong" id="examWrongCount">0</span>
                        <span class="label">YanlÄ±ÅŸ</span>
                    </div>
                    <div class="exam-stat">
                        <span class="value" id="examEmptyCount">0</span>
                        <span class="label">BoÅŸ</span>
                    </div>
                    <div class="exam-stat">
                        <span class="value" id="examTimeSpent">0:00</span>
                        <span class="label">SÃ¼re</span>
                    </div>
                </div>

                <h3>Kategori BazlÄ± SonuÃ§lar</h3>
                <div id="examCategoryResults" class="category-results">
                    <!-- Category results will be shown here -->
                </div>

                <div class="exam-result-actions">
                    <button id="reviewExam" class="btn btn-secondary">ğŸ“ SorularÄ± Ä°ncele</button>
                    <button id="newExam" class="btn btn-primary">ğŸ”„ Yeni SÄ±nav</button>
                </div>
            </div>
        </section>

        <!-- Favorites Tab -->
        <section id="favorites-tab" class="tab-content">
            <div class="card">
                <div class="section-header">
                    <h2>â­ Favori SorularÄ±m</h2>
                    <div class="filter-controls">
                        <select id="favFilterCategory">
                            <option value="all">TÃ¼m Kategoriler</option>
                        </select>
                        <button id="clearFavorites" class="btn btn-danger btn-small">TÃ¼mÃ¼nÃ¼ Temizle</button>
                    </div>
                </div>
                <div class="quiz-options" style="margin-bottom: 16px;">
                    <button id="quizFromFavorites" class="btn btn-primary">ğŸ“ Favorilerden Quiz BaÅŸlat</button>
                </div>
                <div id="favoritesList" class="questions-list">
                    <p class="empty-state">HenÃ¼z favori soru eklenmedi.</p>
                </div>
                <p class="help-text">ğŸ’¡ Ä°pucu: Quiz sÄ±rasÄ±nda â­ butonuna tÄ±klayarak sorularÄ± favorilere ekleyebilirsiniz.</p>
            </div>
        </section>

        <!-- Flashcards Tab -->
        <section id="flashcards-tab" class="tab-content">
            <div class="card">
                <div class="section-header">
                    <h2>ğŸƒ Flashcard - Kelime KartlarÄ±</h2>
                    <div class="flashcard-controls">
                        <button id="shuffleFlashcards" class="btn btn-secondary btn-small">ğŸ”€ KarÄ±ÅŸtÄ±r</button>
                    </div>
                </div>
                
                <div id="flashcard-empty" class="empty-state">
                    <p>HenÃ¼z bilmediÄŸiniz kelime yok.</p>
                    <p class="help-text">ğŸ’¡ Quiz sÄ±rasÄ±nda kelimelere tÄ±klayarak iÅŸaretleyebilirsiniz.</p>
                </div>

                <div id="flashcard-area" class="flashcard-area hidden">
                    <div class="flashcard-progress">
                        <span id="flashcardCurrent">1</span> / <span id="flashcardTotal">0</span>
                        <span class="flashcard-score">
                            âœ“ <span id="flashcardKnown">0</span> | 
                            âœ— <span id="flashcardUnknown">0</span>
                        </span>
                    </div>

                    <div class="flashcard-container">
                        <div id="flashcard" class="flashcard">
                            <div class="flashcard-inner">
                                <div class="flashcard-front">
                                    <span id="flashcardWord" class="flashcard-word"></span>
                                    <span class="flashcard-hint">KartÄ± Ã§evirmek iÃ§in tÄ±kla</span>
                                </div>
                                <div class="flashcard-back">
                                    <span id="flashcardMeaning" class="flashcard-meaning">Anlam yÃ¼kleniyor...</span>
                                    <button id="lookupWord" class="btn btn-secondary btn-small">ğŸ” SÃ¶zlÃ¼kte Ara</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="flashcard-actions">
                        <button id="flashcardUnknownBtn" class="btn btn-danger">âœ— Bilmiyorum</button>
                        <button id="flashcardKnownBtn" class="btn btn-success">âœ“ Biliyorum</button>
                    </div>

                    <div class="flashcard-nav">
                        <button id="flashcardPrev" class="btn btn-secondary">â† Ã–nceki</button>
                        <button id="flashcardNext" class="btn btn-secondary">Sonraki â†’</button>
                    </div>
                </div>

                <div id="flashcard-complete" class="flashcard-complete hidden">
                    <h3>ğŸ‰ Tebrikler!</h3>
                    <p>TÃ¼m kartlarÄ± tamamladÄ±nÄ±z.</p>
                    <div class="flashcard-summary">
                        <span class="known">âœ“ <span id="flashcardFinalKnown">0</span> Bilinen</span>
                        <span class="unknown">âœ— <span id="flashcardFinalUnknown">0</span> Bilinmeyen</span>
                    </div>
                    <button id="restartFlashcards" class="btn btn-primary">Tekrar BaÅŸla</button>
                </div>
            </div>
        </section>

        <!-- Wrong Answers Tab -->
        <section id="wrong-answers-tab" class="tab-content">
            <div class="card">
                <div class="section-header">
                    <h2>âŒ YanlÄ±ÅŸ CevapladÄ±ÄŸÄ±m Sorular</h2>
                    <div class="filter-controls">
                        <select id="wrongFilterCategory">
                            <option value="all">TÃ¼m Kategoriler</option>
                        </select>
                        <button id="clearWrongAnswers" class="btn btn-danger btn-small">TÃ¼mÃ¼nÃ¼ Temizle</button>
                    </div>
                </div>
                <div id="wrongAnswersList" class="questions-list">
                    <p class="empty-state">HenÃ¼z yanlÄ±ÅŸ cevaplanan soru yok.</p>
                </div>
            </div>
        </section>

        <!-- Unknown Words Tab -->
        <section id="unknown-words-tab" class="tab-content">
            <div class="card">
                <div class="section-header">
                    <h2>ğŸ“š BilmediÄŸim Kelimeler</h2>
                    <div class="filter-controls">
                        <input type="text" id="wordSearch" placeholder="Kelime ara...">
                        <button id="clearUnknownWords" class="btn btn-danger btn-small">TÃ¼mÃ¼nÃ¼ Temizle</button>
                    </div>
                </div>
                <div id="unknownWordsList" class="words-list">
                    <p class="empty-state">HenÃ¼z iÅŸaretlenmiÅŸ kelime yok.</p>
                </div>
                <p class="help-text">ğŸ’¡ Ä°pucu: Quiz sÄ±rasÄ±nda bilmediÄŸiniz kelimelere tÄ±klayarak iÅŸaretleyebilirsiniz.</p>
            </div>
        </section>

        <!-- Challenge Tab -->
        <section id="challenge-tab" class="tab-content">
            <!-- Challenge Menu -->
            <div id="challenge-menu" class="card">
                <h2>âš”ï¸ YarÄ±ÅŸma Modu</h2>
                <p class="challenge-description">ArkadaÅŸlarÄ±nla aynÄ± anda yarÄ±ÅŸ! Oda kur veya bir odaya katÄ±l.</p>
                
                <div class="challenge-actions-grid">
                    <div class="challenge-action-card" id="createRoomBtn">
                        <span class="challenge-action-icon">ğŸ </span>
                        <span class="challenge-action-title">Oda Kur</span>
                        <span class="challenge-action-desc">Yeni bir yarÄ±ÅŸma odasÄ± oluÅŸtur</span>
                    </div>
                    <div class="challenge-action-card" id="joinRoomBtn">
                        <span class="challenge-action-icon">ğŸšª</span>
                        <span class="challenge-action-title">Odaya KatÄ±l</span>
                        <span class="challenge-action-desc">Oda kodu ile katÄ±l</span>
                    </div>
                </div>

                <!-- Room History -->
                <div class="challenge-history-section">
                    <h3>ğŸ“œ GeÃ§miÅŸ YarÄ±ÅŸmalar</h3>
                    <div id="challengeHistory" class="challenge-history-list">
                        <p class="empty-state">HenÃ¼z yarÄ±ÅŸma geÃ§miÅŸi yok.</p>
                    </div>
                </div>
            </div>

            <!-- Create Room Form -->
            <div id="create-room-form" class="card hidden">
                <div class="card-header-with-back">
                    <button id="backFromCreate" class="btn btn-secondary btn-small">â† Geri</button>
                    <h2>ğŸ  Oda Kur</h2>
                </div>
                
                <div class="form-group">
                    <label for="roomName">Oda AdÄ±</label>
                    <input type="text" id="roomName" placeholder="YarÄ±ÅŸma odasÄ± adÄ±..." maxlength="50">
                </div>

                <div class="form-group">
                    <label>YarÄ±ÅŸma Modu</label>
                    <div class="challenge-mode-selector">
                        <label class="challenge-mode-option">
                            <input type="radio" name="challengeMode" value="mini-yds" checked>
                            <div class="challenge-mode-card">
                                <span class="mode-icon">âš¡</span>
                                <span class="mode-title">Mini YDS</span>
                                <span class="mode-desc">~20 soru</span>
                            </div>
                        </label>
                        <label class="challenge-mode-option">
                            <input type="radio" name="challengeMode" value="orta-yds">
                            <div class="challenge-mode-card">
                                <span class="mode-icon">ğŸ“</span>
                                <span class="mode-title">Orta YDS</span>
                                <span class="mode-desc">~40 soru</span>
                            </div>
                        </label>
                        <label class="challenge-mode-option">
                            <input type="radio" name="challengeMode" value="yds">
                            <div class="challenge-mode-card">
                                <span class="mode-icon">ğŸ¯</span>
                                <span class="mode-title">Tam YDS</span>
                                <span class="mode-desc">80 soru</span>
                            </div>
                        </label>
                        <label class="challenge-mode-option">
                            <input type="radio" name="challengeMode" value="custom">
                            <div class="challenge-mode-card">
                                <span class="mode-icon">âš™ï¸</span>
                                <span class="mode-title">Ã–zel</span>
                                <span class="mode-desc">Kategori seÃ§</span>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Custom Category Selection (hidden by default) -->
                <div id="customCategorySection" class="form-group hidden">
                    <label>Kategori ve Soru SayÄ±sÄ±</label>
                    <div id="challengeCategoryGrid" class="challenge-category-grid">
                        <!-- Will be populated by JS -->
                    </div>
                </div>

                <!-- Game Settings -->
                <div class="room-settings-section">
                    <label class="settings-section-title">Oyun AyarlarÄ±</label>
                    <div class="room-settings-grid">
                        <!-- SÃ¼re Limiti -->
                        <div class="room-setting-card">
                            <div class="setting-header">
                                <span class="setting-icon">â±ï¸</span>
                                <span class="setting-title">Soru SÃ¼resi</span>
                            </div>
                            <select id="roomTimeLimit" class="setting-select">
                                <option value="0">SÃ¼resiz</option>
                                <option value="15">15 saniye</option>
                                <option value="30" selected>30 saniye</option>
                                <option value="45">45 saniye</option>
                                <option value="60">60 saniye</option>
                                <option value="90">90 saniye</option>
                                <option value="120">2 dakika</option>
                            </select>
                        </div>

                        <!-- Can Sistemi -->
                        <div class="room-setting-card">
                            <div class="setting-header">
                                <span class="setting-icon">â¤ï¸</span>
                                <span class="setting-title">Can Sistemi</span>
                            </div>
                            <select id="livesSelect" class="setting-select">
                                <option value="0">KapalÄ±</option>
                                <option value="3">3 Can</option>
                                <option value="5">5 Can</option>
                                <option value="10">10 Can</option>
                            </select>
                        </div>

                        <!-- Soru KarÄ±ÅŸtÄ±rma -->
                        <div class="room-setting-card">
                            <div class="setting-header">
                                <span class="setting-icon">ğŸ”€</span>
                                <span class="setting-title">Soru SÄ±rasÄ±</span>
                            </div>
                            <select id="roomShuffleQuestions" class="setting-select">
                                <option value="shuffle" selected>KarÄ±ÅŸÄ±k</option>
                                <option value="ordered">SÄ±ralÄ±</option>
                            </select>
                        </div>

                        <!-- Puan Sistemi -->
                        <div class="room-setting-card">
                            <div class="setting-header">
                                <span class="setting-icon">ğŸ†</span>
                                <span class="setting-title">Puanlama</span>
                            </div>
                            <select id="roomScoring" class="setting-select">
                                <option value="speed" selected>HÄ±z Bonuslu</option>
                                <option value="normal">Standart</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div id="createRoomError" class="auth-error"></div>
                <button id="submitCreateRoom" class="btn btn-primary btn-large btn-full">ğŸš€ Oda OluÅŸtur</button>
            </div>

            <!-- Join Room Form -->
            <div id="join-room-form" class="card hidden">
                <div class="card-header-with-back">
                    <button id="backFromJoin" class="btn btn-secondary btn-small">â† Geri</button>
                    <h2>ğŸšª Odaya KatÄ±l</h2>
                </div>
                
                <div class="form-group">
                    <label for="joinRoomCode">Oda Kodu</label>
                    <input type="text" id="joinRoomCode" placeholder="6 haneli oda kodu..." maxlength="6" style="text-transform: uppercase; font-size: 1.5rem; text-align: center; letter-spacing: 0.3em;">
                </div>
                
                <div id="joinRoomError" class="auth-error"></div>
                <button id="submitJoinRoom" class="btn btn-primary btn-large">ğŸšª Odaya KatÄ±l</button>
            </div>

            <!-- Room Lobby -->
            <div id="room-lobby" class="card hidden">
                <div class="room-lobby-header">
                    <h2>ğŸ  <span id="lobbyRoomName">Oda</span></h2>
                    <div class="room-code-display">
                        <span class="room-code-label">Oda Kodu:</span>
                        <span class="room-code-value" id="lobbyRoomCode">------</span>
                        <button id="copyRoomCode" class="btn btn-icon btn-small" title="Kodu Kopyala">ğŸ“‹</button>
                    </div>
                </div>

                <div class="room-info-bar">
                    <span>ğŸ“ <span id="lobbyQuestionCount">0</span> Soru</span>
                    <span>ğŸ‘¥ <span id="lobbyParticipantCount">0</span> KatÄ±lÄ±mcÄ±</span>
                    <span id="lobbyTimeLimitInfo" class="hidden">â±ï¸ <span id="lobbyTimeLimit">30</span>s</span>
                    <span id="lobbyLivesInfo" class="hidden">â¤ï¸ <span id="lobbyMaxLives">3</span> Can</span>
                </div>

                <div class="participants-section">
                    <h3>ğŸ‘¥ KatÄ±lÄ±mcÄ±lar</h3>
                    <div id="participantsList" class="participants-list">
                        <!-- Participants will be listed here -->
                    </div>
                </div>

                <div class="lobby-actions">
                    <button id="readyBtn" class="btn btn-success btn-large">âœ… HazÄ±rÄ±m</button>
                    <button id="startGameBtn" class="btn btn-primary btn-large hidden">ğŸš€ YarÄ±ÅŸmayÄ± BaÅŸlat</button>
                    <button id="leaveLobbyBtn" class="btn btn-danger btn-small">ğŸšª Odadan AyrÄ±l</button>
                </div>
                <div id="lobbyStatus" class="lobby-status-text"></div>
            </div>

            <!-- Challenge Game Area -->
            <div id="challenge-game" class="card hidden">
                <div class="quiz-header">
                    <div class="quiz-progress">
                        <span id="challengeCurrentQ">1</span> / <span id="challengeTotalQ">10</span>
                    </div>
                    <div id="challengeLivesDisplay" class="challenge-lives hidden"></div>
                    <div id="challengeTimerDisplay" class="timer-display hidden">
                        â±ï¸ <span id="challengeTimerValue">0</span>
                    </div>
                    <div class="quiz-score">
                        <span class="correct">âœ“ <span id="challengeCorrect">0</span></span>
                        <span class="wrong">âœ— <span id="challengeWrong">0</span></span>
                    </div>
                </div>

                <div class="progress-bar">
                    <div id="challengeProgressFill" class="progress-fill"></div>
                </div>

                <div id="challengeQuestionContainer" class="question-container">
                    <div class="question-header">
                        <p id="challengeQuestionText" class="question-text"></p>
                    </div>
                    <div id="challengeOptionsContainer" class="options-container"></div>
                </div>

                <div id="challengeFeedback" class="feedback hidden">
                    <p id="challengeFeedbackText"></p>
                </div>

                <div id="challengeAnswerStatus" class="answer-status hidden">
                    <span id="answerStatusText"></span>
                </div>

                <div class="quiz-actions">
                    <button id="challengePrevBtn" class="btn btn-secondary hidden">â† Ã–nceki Soru</button>
                    <button id="challengeNextBtn" class="btn btn-primary hidden">Sonraki Soru â†’</button>
                </div>

                <!-- Live Scoreboard -->
                <div class="challenge-scoreboard">
                    <h4>ğŸ“Š Skor Tablosu</h4>
                    <div id="liveScoreboard" class="live-scoreboard">
                        <!-- Updated in real-time -->
                    </div>
                </div>
            </div>

            <!-- Challenge Results -->
            <div id="challenge-results" class="card hidden">
                <h2>ğŸ† YarÄ±ÅŸma SonuÃ§larÄ±</h2>
                
                <div id="challengeWinnerSection" class="challenge-winner-section">
                    <!-- Winner announcement -->
                </div>

                <div class="challenge-results-table">
                    <h3>ğŸ“Š SÄ±ralama</h3>
                    <div id="challengeResultsList" class="challenge-results-list">
                        <!-- Results will be listed here -->
                    </div>
                </div>

                <div class="challenge-category-stats">
                    <h3>ğŸ“ˆ Kategori BazlÄ± SonuÃ§lar</h3>
                    <div id="challengeCategoryStats" class="category-stats">
                        <!-- Category stats -->
                    </div>
                </div>

                <div class="challenge-result-actions">
                    <button id="backToChallenge" class="btn btn-primary btn-large">âš”ï¸ Yeni YarÄ±ÅŸma</button>
                </div>
            </div>
        </section>

        <!-- Key Words Tab -->
        <section id="key-words-tab" class="tab-content">
            <div class="card">
                <div class="section-header">
                    <h2>ğŸ”‘ Kritik Kelimeler & Ä°fadeler</h2>
                    <div class="filter-controls">
                        <select id="kwTypeFilter">
                            <option value="all">TÃ¼mÃ¼</option>
                            <option value="phrase">Ã‡ok Kelimeli Ä°fadeler</option>
                            <option value="word">Tekil Kelimeler</option>
                        </select>
                        <select id="kwCategoryFilter">
                            <option value="all">TÃ¼m Kategoriler</option>
                        </select>
                    </div>
                </div>

                <div class="kw-stats-bar" id="kwStatsBar">
                    <div class="kw-stat-item">
                        <span class="kw-stat-value" id="kwTotalExpressions">-</span>
                        <span class="kw-stat-label">Toplam Ä°fade</span>
                    </div>
                    <div class="kw-stat-item">
                        <span class="kw-stat-value" id="kwTotalPhrases">-</span>
                        <span class="kw-stat-label">Ã‡ok Kelimeli</span>
                    </div>
                    <div class="kw-stat-item">
                        <span class="kw-stat-value" id="kwTotalWords">-</span>
                        <span class="kw-stat-label">Tekil Kelime</span>
                    </div>
                    <div class="kw-stat-item">
                        <span class="kw-stat-value" id="kwQuestionsAnalyzed">-</span>
                        <span class="kw-stat-label">Analiz Edilen Soru</span>
                    </div>
                </div>

                <div class="kw-search-bar">
                    <input type="text" id="kwSearch" placeholder="Kelime veya ifade ara...">
                </div>

                <div id="kwContent" class="kw-content">
                    <p class="loading">YÃ¼kleniyor...</p>
                </div>
            </div>
        </section>

        <!-- Stats Tab -->
        <section id="stats-tab" class="tab-content">
            <div class="card">
                <h2>ğŸ“Š Ä°statistikler</h2>
                
                <!-- Streak and Daily Goal -->
                <div class="streak-goal-container">
                    <div class="streak-card">
                        <span class="streak-icon">ğŸ”¥</span>
                        <span class="streak-value" id="streakDays">0</span>
                        <span class="streak-label">GÃ¼n Seri</span>
                    </div>
                    <div class="goal-card">
                        <div class="goal-header">
                            <span>ğŸ“ GÃ¼nlÃ¼k Hedef</span>
                            <button id="editGoal" class="btn btn-icon btn-small">âš™ï¸</button>
                        </div>
                        <div class="goal-progress">
                            <div class="goal-bar">
                                <div id="goalFill" class="goal-fill" style="width: 0%"></div>
                            </div>
                            <span class="goal-text"><span id="todayAnswered">0</span> / <span id="dailyGoal">20</span></span>
                        </div>
                    </div>
                </div>

                <!-- Weekly Activity Chart -->
                <div class="weekly-chart-container">
                    <h3>ğŸ“… HaftalÄ±k Aktivite</h3>
                    <div class="weekly-chart" id="weeklyChart">
                        <!-- Chart bars will be generated here -->
                    </div>
                    <div class="weekly-labels">
                        <span>Pzt</span><span>Sal</span><span>Ã‡ar</span><span>Per</span><span>Cum</span><span>Cmt</span><span>Paz</span>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-value" id="totalAnswered">0</span>
                        <span class="stat-label">Toplam Cevaplanan</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-value" id="totalCorrect">0</span>
                        <span class="stat-label">Toplam DoÄŸru</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-value" id="totalWrong">0</span>
                        <span class="stat-label">Toplam YanlÄ±ÅŸ</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-value" id="overallPercentage">0%</span>
                        <span class="stat-label">Genel BaÅŸarÄ±</span>
                    </div>
                </div>

                <h3>Kategorilere GÃ¶re BaÅŸarÄ±</h3>
                <div id="categoryStats" class="category-stats">
                    <!-- Category stats will be loaded here -->
                </div>

                <div class="stats-actions">
                    <button id="resetStats" class="btn btn-danger">Ä°statistikleri SÄ±fÄ±rla</button>
                    <button id="clearAnswerHistory" class="btn btn-secondary">Cevap GeÃ§miÅŸini Temizle</button>
                </div>
            </div>
        </section>
        </div><!-- container kapanÄ±ÅŸÄ± -->

    </div><!-- app-wrapper kapanÄ±ÅŸÄ± -->

    <!-- Goal Setting Modal -->
    <div id="goalModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>ğŸ¯ GÃ¼nlÃ¼k Hedef Belirle</h3>
                <button class="modal-close" id="closeGoalModal">&times;</button>
            </div>
            <div class="goal-setting">
                <label>GÃ¼nlÃ¼k soru hedefi:</label>
                <input type="number" id="goalInput" min="5" max="200" value="20">
                <button id="saveGoal" class="btn btn-primary">Kaydet</button>
            </div>
        </div>
    </div>

    <!-- Dictionary Modal -->
    <div id="dictionaryModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>ğŸ“– <span id="modalWord">Kelime</span></h3>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            <div id="dictionaryContent" class="dictionary-results">
                <p>YÃ¼kleniyor...</p>
            </div>
        </div>
    </div>

    <!-- GPT Explanation Modal -->
    <div id="gptExplanationModal" class="modal-overlay">
        <div class="modal gpt-modal">
            <div class="modal-header">
                <h3>ğŸ¤– GPT AÃ§Ä±klamasÄ±</h3>
                <button class="modal-close" id="closeGPTModal">&times;</button>
            </div>
            <div class="gpt-modal-body">
                <div class="gpt-question-section">
                    <p id="gptModalQuestion" class="gpt-question-text"></p>
                    <div id="gptModalAnswers" class="gpt-answers"></div>
                </div>
                <div id="gptCacheIndicator" class="gpt-cache-indicator" style="display: none;">
                    ğŸ’¾ KayÄ±tlÄ± aÃ§Ä±klama
                </div>
                <div id="gptExplanationContent" class="gpt-explanation-content">
                    <p>YÃ¼kleniyor...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modular Utilities -->
    <script src="src/utils/constants.js"></script>
    <script src="src/utils/storage.js"></script>
    <script src="src/utils/api.js"></script>
    <script src="src/utils/helpers.js"></script>
    <!-- Main Application -->
    <script src="app.js"></script>
</body>
</html>

